<!DOCTYPE html>
<head>
   <title>Orientation Event</title>
   <meta name = "viewport" content = "width = device-width, initial-scale = 1">
   <link rel = "stylesheet" href = "https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
   <script src = "https://code.jquery.com/jquery-1.11.3.min.js"></script>
   <script src = "https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
   <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
   <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
   <meta http-equiv="Content-Security-Policy" content="default-src * 'self' 'unsafe-inline' 'unsafe-eval'; style-src * 'self' 'unsafe-inline'; media-src * 'self' http: data: blob:; script-src * 'self' 'unsafe-inline' 'unsafe-eval' http: data:; img-src * 'self' data:" />
   <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *;**script-src 'self' http://onlineerp.solution.quebec 'unsafe-inline' 'unsafe-eval';** "> -->
   <script>
      $(document).on("pagecreate","#page1",function(event) {
         $(window).on("orientationchange",function() {
            if(window.orientation == 0) {
                window.location.href = "index.html";
                vibrationPattern();
            } else {   
            }
         });

         $("#cameraTakePicture").on("click",function(){
             
            navigator.camera.getPicture(onSuccess, onFail, {  
            quality: 50, 
            destinationType: Camera.DestinationType.DATA_URL 
            });  
            
            function onSuccess(imageData) { 
                alert("successs");
            var image = document.getElementById('myImage'); 
            image.src = "data:image/jpeg;base64," + imageData; 
            }  
            
            function onFail(message) { 
            alert('Failed because: ' + message); 
            }
            });
      });

        function vibrationPattern() {        
            var pattern = 1000;
            navigator.vibrate(pattern);
        }
   </script>
</head>

<body>
   <div data-role = "page" id = "page1">
      
      <div data-role = "main" class = "ui-content">
        <button id = "cameraTakePicture">TAKE PICTURE</button>
        <img id = "myImage" style="height:200px; width:200px;"></img>
      </div>
   </div>
   <script type="text/javascript" src="cordova.js"></script>
   <script type="text/javascript" src="index.js"></script>
</body>
</html>
